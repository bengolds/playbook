<link rel="import" href="../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="arrow-box.html">
<link rel="import" href="playbook-icons.html">

<dom-module id="var-action-bar">
  <template>
    <style>
      :host {
        display: block;
        position: absolute;
      }
      paper-icon-button {
        opacity: .54;
      }
    </style>
  <arrow-box direction='down'>
    <paper-icon-button icon='playbook-icons:real' toggles></paper-icon-button>
    <paper-icon-button icon='playbook-icons:complex' toggles></paper-icon-button>
    <paper-icon-button icon='playbook-icons:pin'
      on-click='pinClicked'></paper-icon-button>
  </arrow-box>
  </template>

  <script>
    Polymer({
      is: 'var-action-bar',
      properties: {
        functor: {
          type: Object,
          notify: true
        },
        variable: {
          type: String,
        }
      },
      attached: function () {
      },

      pinClicked: function (e, details) {
        if (this.isCurrVarPinned()) {
          this.fire('functor-unpinvar', {
            variable: this.variable
          });
        } 
        else {
          this.fire('functor-pinvar', {
            variable: this.variable, 
            value: 0.5,
            range: [0,1],
          });
        }
      },
      isCurrVarPinned: function (_) {
        return (this.variable in this.functor.boundVars);
      }

    });
  </script>
</dom-module>