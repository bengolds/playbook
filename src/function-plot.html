<link rel="import" href="../bower_components/plotly-plot/plotly-plot.html">
<!--
A comment describing this element

Example:

    <my-elem></my-elem>

Example:

    <my-elem>
      <h2>Hello my-elem</h2>
    </my-elem>

@demo demo/index.html
-->

<dom-module id="function-plot">
	<template>
		<style>
			:host {
				display: block;
			}
			::shadow .modebar {
				display: none;
			}
		</style>
		
		<plotly-plot id="plot"></plotly-plot> 

	</template>

	<script>
		Polymer({
			is: 'function-plot',

			properties: {
				func: {
					type: Object,
					observer: "_funcChanged"
				}
			},

			attached: function() {
				var self = this;
				var plotEl = this.$.plot;
				plotEl.set('config', {
					displayModeBar: false,
				});
				plotEl.set('layout', {
					height:100,
					margin: {
						l: 0,
						r: 0,
						t: 0,
						b: 0,
						pad: 0
					}

				});
			},

			_funcChanged: function() {
				// var newData = this._computePoints(100);
				// var plotlyplot = this.$.plot;
				// Plotly.animate(plotlyplot.$.plot, {
				// 	data: [newData],
				// 	traces: [0],
				// 	layout: {}
				// 	}, {
				// 		transition: {
				// 			duration: 500,
				// 			ease: 'cubic-in-out'
				// 		}
				// 	});
				this.$.plot.set('data.0', this._computePoints(100));
			},

			_computePoints: function(numPoints) {
				data = { "x":[], "y":[]}
				for (var i = 0; i < numPoints; i++) {
					data.x[i] = i;
					data.y[i] = this.func.eval(i);
				}
				return data;
			}
		});
	</script>
</dom-module>